# 🚀 AI旅行规划师 - 快速运行指南

## 方法一：使用本地启动脚本（最简单）⭐

```bash
# 1. 克隆项目
git clone https://github.com/bxttttt/AI_TravelPlanner.git
cd AI_TravelPlanner

# 2. 运行启动脚本
chmod +x start.sh
./start.sh
```

脚本会：
- ✅ 自动检查 Docker 环境
- ✅ 选择启动方式（从源码构建 或 使用预构建镜像）
- ✅ 自动配置环境
- ✅ 启动服务

然后访问: **http://localhost:3001**

---

## 方法二：直接使用 Docker Compose（快速）

### 使用预构建镜像（如果已有）

```bash
# 1. 导入镜像
docker load < ai-travel-planner-v1.0.0.tar

# 2. 启动
docker-compose -f docker-compose.prod.yml up -d

# 3. 查看日志
docker-compose -f docker-compose.prod.yml logs -f

# 4. 访问
open http://localhost:3001
```

### 从源码构建（首次使用）

```bash
# 1. 克隆项目
git clone https://github.com/bxttttt/AI_TravelPlanner.git
cd AI_TravelPlanner

# 2. 构建并启动
docker-compose up -d --build

# 3. 查看日志
docker-compose logs -f

# 4. 访问
open http://localhost:3001
```

---

## 方法三：使用 GitHub Container Registry 镜像（推荐生产环境）

```bash
# 1. 从 ghcr.io 拉取镜像
docker pull ghcr.io/bxttttt/ai-travel-planner:latest

# 2. 运行容器
docker run -d \
  --name ai-travel-planner \
  -p 3001:3001 \
  --restart unless-stopped \
  ghcr.io/bxttttt/ai-travel-planner:latest

# 3. 访问
open http://localhost:3001
```

---

## 方法四：本地开发运行（不使用Docker）

### 前端和后端分别运行

```bash
# 1. 安装后端依赖
npm install

# 2. 安装前端依赖
cd client
npm install
cd ..

# 3. 配置API Key
# 编辑 server-test.js，将你的API Key填入第227行
# const apiKey = 'your-api-key';

# 4. 启动后端（终端1）
PORT=3001 node server-test.js

# 5. 启动前端（终端2）
cd client
npm start

# 6. 访问
open http://localhost:3000
```

---

## 🛠️ 常用管理命令

### 查看服务状态
```bash
docker-compose ps
```

### 查看日志
```bash
# 查看所有日志
docker-compose logs -f

# 只查看应用日志
docker-compose logs -f app

# 只查看MongoDB日志
docker-compose logs -f mongodb
```

### 停止服务
```bash
docker-compose down
```

### 重启服务
```bash
docker-compose restart
```

### 完全清理（包括数据）
```bash
docker-compose down -v
```

---

## 🐛 故障排除

### 问题1: 端口被占用

```bash
# 检查端口占用
lsof -i :3001

# 修改端口（编辑 docker-compose.yml）
ports:
  - "8080:3001"  # 改为其他端口
```

### 问题2: 无法访问

```bash
# 检查容器状态
docker ps

# 检查日志
docker logs ai-travel-planner-app

# 检查网络
curl http://localhost:3001
```

### 问题3: AI Key 未配置

```bash
# 编辑 .env 或 server-test.js
nano .env

# 或者直接修改 server-test.js 中的 apiKey
```

### 问题4: 构建失败

```bash
# 清理Docker缓存
docker system prune -a

# 重新构建
docker-compose build --no-cache
```

---

## 📝 重要配置文件

### 环境变量（.env）

```bash
# 复制示例文件
cp env.example .env

# 编辑配置
nano .env
```

主要配置：
- `JWT_SECRET` - JWT密钥（生产环境请修改）
- `PORT` - 应用端口（默认为3001）

### API Key配置

在 `server-test.js` 第227行配置阿里云百炼API Key：

```javascript
const apiKey = 'sk-your-api-key-here';
```

获取API Key: https://dashscope.console.aliyun.com/

---

## 🎯 快速开始建议

### 第一次使用

1. 使用**方法一**（启动脚本）- 最简单
2. 访问 http://localhost:3001
3. 配置API Key（在代码中）
4. 开始创建旅行计划

### 开发环境

1. 使用**方法四**（本地运行）- 便于调试
2. 前端运行在 http://localhost:3000
3. 后端运行在 http://localhost:3001

### 生产环境

1. 使用**方法三**（GHCR镜像）- 最稳定
2. 配置HTTPS和域名
3. 修改默认密码和密钥
4. 设置数据备份

---

## 📚 更多文档

- [完整Docker部署指南](README-Docker.md)
- [5分钟快速开始](QUICKSTART.md)
- [镜像使用说明](DOCKER-IMAGE-README.md)
- [项目主文档](README.md)

---

**祝你使用愉快！🎉**

如果遇到问题，请查看对应的故障排除部分，或在GitHub Issues提问。


